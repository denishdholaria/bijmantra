# SETU Task: SETU-2026-01-13-001

## Metadata
- **ID**: SETU-2026-01-13-001
- **Created**: 2026-01-13T00:00:00Z
- **Priority**: P0
- **Type**: DESIGN
- **Status**: PENDING

---

## Context

BijMantra's AI agent system is in architectural disarray. We have:

1. **Veena (वीणा)** — Primary AI assistant integrated into source code, partially working but keeps breaking
2. **ASTRA Arsenal (आस्त्र)** — Sidebar with multiple agents that clash with Veena
3. **No clear boundaries** — Agents overlap, compete for UI space, unclear data access

Current session: 78. Just completed analysis of 47 reference plant breeding apps. Now need to stabilize the AI agent architecture before adding more features.

---

## Request

Design a robust, maintainable AI agent architecture for BijMantra that:

1. **Resolves the Veena vs ASTRA conflict** — Should we have one agent or multiple?
2. **Defines clear data access boundaries** — Which tables are read-only for AI?
3. **Establishes failure isolation** — How to prevent cascading failures?
4. **Fits single-maintainer constraints** — Must be simple enough for one developer

Key questions:
- Single general agent (Veena) or multiple specialized agents?
- How to guarantee AI cannot corrupt research data?
- What's the minimum viable architecture that still delivers value?

---

## Attached Files

Reference these files for context:

| File | Purpose |
|------|---------|
| `docs/gupt/antigravity-prompts/AI-AGENT-ARCHITECTURE-CRISIS.md` | Full crisis documentation |
| `backend/app/services/function_executor.py` | Veena's function execution |
| `backend/app/services/llm_service.py` | LLM integration |
| `frontend/src/components/agents/AstraSidebar.tsx` | ASTRA agent arsenal |
| `frontend/src/components/agents/registry.ts` | Agent registry |

---

## Constraints

- **Single developer** maintaining the system
- **Limited time** — Cannot afford complex architectures
- **Must work now** — Needs immediate stability, not future vision
- **Data safety** — AI must never corrupt research data (germplasm, observations, trials)

---

## Expected Output

1. **Architecture Decision** — Single vs. multiple agents, with clear rationale
2. **Data Safety Model** — Which tables read-only, how enforced
3. **UI Integration Pattern** — How agents appear in interface
4. **Migration Plan** — Step-by-step from current chaos to stable architecture
5. **Complexity Budget** — Maximum acceptable complexity for single maintainer

Format: Markdown document with ASCII diagrams where helpful, specific file changes, and actionable instructions Kiro can execute.

---

## Kiro's Preliminary Analysis

Based on code inspection:

1. `function_executor.py` currently only has `search_germplasm` querying real database — other functions return demo data
2. ASTRA registry has 5 agents but only Veena and REEVA have backends
3. Both Veena and ASTRA compete for right sidebar space in `Layout.tsx`
4. No read-only enforcement exists — AI has same database access as regular API

Recommendation: Simplify first, then extend. But need Antigravity's architectural guidance on the right simplification path.

---

*Task created by Kiro for Antigravity processing*
